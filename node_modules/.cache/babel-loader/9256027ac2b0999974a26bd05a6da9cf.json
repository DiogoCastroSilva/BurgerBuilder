{"ast":null,"code":"var _jsxFileName = \"/Users/diogosilva/Desktop/react-complete-guide/the-burguer-builder/src/containers/BurgerBuilder/BurgerBuilder.js\";\nimport React, { Fragment, useState, useEffect } from 'react';\nimport { connect, useDispatch } from 'react-redux';\nimport Burger from '../../components/Burger/Burger';\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls';\nimport Modal from '../../components/UI/Modal/Modal';\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary';\nimport Spinner from '../../components/UI/Spinner/Spinner';\nimport withErrorHandler from '../hoc/withErrorHandler/withErrorHandler';\nimport axios from '../../axios-orders';\nimport { addIngredient, removeIngredient, getIngredients, purchaseInit } from '../../store/actions/index';\nimport { setRedirectPath } from '../../store/actions/auth';\nexport const BurgerBuilder = ({\n  getIngredients,\n  onSetRedirectPath,\n  onInitPurchase,\n  onIngredientAdded,\n  onIngredientRemoved,\n  isAuth,\n  history,\n  ingredients,\n  totalPrice,\n  error\n}) => {\n  const [pusrchasing, setPusrchasing] = useState(false);\n  const dispatch = useDispatch();\n\n  onIngredientAdded: name => dispatch(addIngredient(name));\n\n  onIngredientRemoved: name => dispatch(removeIngredient(name));\n\n  getIngredients: () => dispatch(getIngredients());\n\n  onInitPurchase: () => dispatch(purchaseInit());\n\n  onSetRedirectPath: path => dispatch(setRedirectPath(path));\n\n  useEffect(() => {\n    getIngredients();\n  }, [getIngredients]);\n\n  const updatePurchaseState = ingredients => {\n    const sum = Object.keys(ingredients).map(key => ingredients[key]).reduce((sum, el) => {\n      return sum + el;\n    }, 0);\n    return sum > 0;\n  };\n\n  const purchaseHandler = () => {\n    if (isAuth) {\n      setPusrchasing(true);\n    } else {\n      onSetRedirectPath('/checkout');\n      history.push('/auth');\n    }\n  };\n\n  const purchaseCancelHandler = () => {\n    setPusrchasing(false);\n  };\n\n  const purchaseContinueHandler = () => {\n    onInitPurchase();\n    history.push('/checkout');\n  };\n\n  const disableInfo = { ...ingredients\n  };\n\n  for (let key in disableInfo) {\n    disableInfo[key] = disableInfo[key] <= 0;\n  }\n\n  let orderSummary = ingredients ? React.createElement(OrderSummary, {\n    ingredients: ingredients,\n    purchaseCancel: purchaseCancelHandler,\n    purchaseContinue: purchaseContinueHandler,\n    price: totalPrice,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }) : null;\n  let burger = error ? React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Ingredients can't be loaded!\") : React.createElement(Spinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  });\n\n  if (ingredients) {\n    burger = React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(Burger, {\n      ingredients: ingredients,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(BuildControls, {\n      ingredientAdded: onIngredientAdded,\n      ingredientRemoved: onIngredientRemoved,\n      disabled: disableInfo,\n      purchasable: updatePurchaseState(ingredients),\n      price: totalPrice,\n      ordered: purchaseHandler,\n      isAuth: isAuth,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }));\n  }\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(Modal, {\n    show: pusrchasing,\n    modalClose: purchaseCancelHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, orderSummary), burger);\n};\n\nconst mapStateToProps = state => {\n  return {\n    ingredients: state.burgerBuilder.ingredients,\n    totalPrice: state.burgerBuilder.totalPrice,\n    error: state.burgerBuilder.error,\n    isAuth: state.auth.token !== null\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onIngredientAdded: name => dispatch(addIngredient(name)),\n    onIngredientRemoved: name => dispatch(removeIngredient(name)),\n    getIngredients: () => dispatch(getIngredients()),\n    onInitPurchase: () => dispatch(purchaseInit()),\n    onSetRedirectPath: path => dispatch(setRedirectPath(path))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(BurgerBuilder, axios));","map":{"version":3,"sources":["/Users/diogosilva/Desktop/react-complete-guide/the-burguer-builder/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Fragment","useState","useEffect","connect","useDispatch","Burger","BuildControls","Modal","OrderSummary","Spinner","withErrorHandler","axios","addIngredient","removeIngredient","getIngredients","purchaseInit","setRedirectPath","BurgerBuilder","onSetRedirectPath","onInitPurchase","onIngredientAdded","onIngredientRemoved","isAuth","history","ingredients","totalPrice","error","pusrchasing","setPusrchasing","dispatch","name","path","updatePurchaseState","sum","Object","keys","map","key","reduce","el","purchaseHandler","push","purchaseCancelHandler","purchaseContinueHandler","disableInfo","orderSummary","burger","mapStateToProps","state","burgerBuilder","auth","token","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react';\nimport { connect, useDispatch } from 'react-redux';\n\nimport Burger from '../../components/Burger/Burger';\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls';\nimport Modal from '../../components/UI/Modal/Modal';\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary';\nimport Spinner from '../../components/UI/Spinner/Spinner';\nimport withErrorHandler from '../hoc/withErrorHandler/withErrorHandler';\nimport axios from '../../axios-orders';\nimport { addIngredient, removeIngredient, getIngredients, purchaseInit } from '../../store/actions/index';\nimport { setRedirectPath } from '../../store/actions/auth';\n\nexport const BurgerBuilder = ({\n    getIngredients,\n    onSetRedirectPath,\n    onInitPurchase,\n    onIngredientAdded,\n    onIngredientRemoved,\n    isAuth,\n    history,\n    ingredients,\n    totalPrice,\n    error\n}) => {\n    const [pusrchasing, setPusrchasing] = useState(false);\n    const dispatch = useDispatch();\n    onIngredientAdded: (name) => dispatch(addIngredient(name));\n    onIngredientRemoved: (name) => dispatch(removeIngredient(name));\n    getIngredients: () => dispatch(getIngredients());\n    onInitPurchase: () => dispatch(purchaseInit());\n    onSetRedirectPath: (path) => dispatch(setRedirectPath(path));\n\n    useEffect(() => {\n        getIngredients();\n    }, [getIngredients]);\n\n    const updatePurchaseState = (ingredients) => {\n        const sum = Object.keys(ingredients)\n            .map(key => ingredients[key])\n            .reduce((sum, el) => {\n                return sum + el;\n            }, 0);\n        return sum > 0;\n    };\n\n    const purchaseHandler = () => {\n        if (isAuth) {\n            setPusrchasing(true);\n        } else {\n            onSetRedirectPath('/checkout');\n            history.push('/auth');\n        }\n        \n    };\n\n    const purchaseCancelHandler = () => {\n        setPusrchasing(false);\n    };\n\n    const purchaseContinueHandler = () => {\n        onInitPurchase();\n        history.push('/checkout');\n    };\n\n    const disableInfo = {\n        ...ingredients\n    };\n\n    for (let key in disableInfo) {\n        disableInfo[key] = disableInfo[key] <= 0;\n    }\n\n    let orderSummary = ingredients ?\n            <OrderSummary\n                ingredients={ingredients}\n                purchaseCancel={purchaseCancelHandler}\n                purchaseContinue={purchaseContinueHandler}\n                price={totalPrice} /> :\n                null;\n\n    let burger = error ? <p>Ingredients can't be loaded!</p> : <Spinner />;\n\n    if (ingredients) {\n        burger = (\n            <Fragment>\n                <Burger ingredients={ingredients} />\n                <BuildControls\n                    ingredientAdded={onIngredientAdded}\n                    ingredientRemoved={onIngredientRemoved}\n                    disabled={disableInfo}\n                    purchasable={updatePurchaseState(ingredients)}\n                    price={totalPrice}\n                    ordered={purchaseHandler}\n                    isAuth={isAuth} />\n            </Fragment>\n        );\n    }\n\n    return (\n        <Fragment>\n            <Modal show={pusrchasing} modalClose={purchaseCancelHandler}>\n                {orderSummary}\n            </Modal>\n            {burger}\n        </Fragment>\n    );\n}\n\nconst mapStateToProps = state => {\n    return {\n        ingredients: state.burgerBuilder.ingredients,\n        totalPrice: state.burgerBuilder.totalPrice,\n        error: state.burgerBuilder.error,\n        isAuth: state.auth.token !== null\n    };\n};\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onIngredientAdded: (name) => dispatch(addIngredient(name)),\n        onIngredientRemoved: (name) => dispatch(removeIngredient(name)),\n        getIngredients: () => dispatch(getIngredients()),\n        onInitPurchase: () => dispatch(purchaseInit()),\n        onSetRedirectPath: (path) => dispatch(setRedirectPath(path))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(BurgerBuilder, axios));"]},"metadata":{},"sourceType":"module"}