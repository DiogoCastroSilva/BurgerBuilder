{"ast":null,"code":"import _classCallCheck from\"/Users/diogosilva/Desktop/the-burguer-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/diogosilva/Desktop/the-burguer-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/diogosilva/Desktop/the-burguer-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/diogosilva/Desktop/the-burguer-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/diogosilva/Desktop/the-burguer-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Fragment,Component}from'react';import Modal from'../../../components/UI/Modal/Modal';var withErrorHandler=function withErrorHandler(WrappedComponent,axios){var _temp;return _temp=/*#__PURE__*/function(_Component){_inherits(_temp,_Component);function _temp(){var _getPrototypeOf2;var _this;_classCallCheck(this,_temp);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(_temp)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={error:null};_this.errorConfirmHandler=function(){_this.setState({error:null});};return _this;}_createClass(_temp,[{key:\"componentWilldMount\",value:function componentWilldMount(){var _this2=this;this.reqInterceptor=axios.interceptors.response.use(function(req){_this2.setState({error:null});return req;});this.resInterceptor=axios.interceptors.response.use(function(res){return res;},function(error){_this2.setState({error:error});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){axios.interceptors.request.eject(this.reqInterceptor);axios.interceptors.request.eject(this.resInterceptor);}},{key:\"render\",value:function render(){return React.createElement(Fragment,null,React.createElement(Modal,{show:this.state.error,modalClose:this.errorConfirmHandler},this.state.error?this.state.error.message:null),React.createElement(WrappedComponent,this.props));}}]);return _temp;}(Component),_temp;};export default withErrorHandler;","map":{"version":3,"sources":["/Users/diogosilva/Desktop/the-burguer-builder/src/containers/hoc/withErrorHandler/withErrorHandler.js"],"names":["React","Fragment","Component","Modal","withErrorHandler","WrappedComponent","axios","state","error","errorConfirmHandler","setState","reqInterceptor","interceptors","response","use","req","resInterceptor","res","request","eject","message","props"],"mappings":"k0BAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,oCAAlB,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,gBAAD,CAAmBC,KAAnB,CAA6B,WAClD,uYACIC,KADJ,CACY,CACJC,KAAK,CAAE,IADH,CADZ,OAqBIC,mBArBJ,CAqB0B,UAAM,CACxB,MAAKC,QAAL,CAAc,CAACF,KAAK,CAAE,IAAR,CAAd,EACH,CAvBL,kGAK0B,iBAClB,KAAKG,cAAL,CAAsBL,KAAK,CAACM,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgC,SAAAC,GAAG,CAAI,CACzD,MAAI,CAACL,QAAL,CAAc,CAACF,KAAK,CAAE,IAAR,CAAd,EACA,MAAOO,CAAAA,GAAP,CACH,CAHqB,CAAtB,CAKA,KAAKC,cAAL,CAAsBV,KAAK,CAACM,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgC,SAAAG,GAAG,QAAIA,CAAAA,GAAJ,EAAnC,CAA4C,SAAAT,KAAK,CAAI,CACvE,MAAI,CAACE,QAAL,CAAc,CAACF,KAAK,CAAEA,KAAR,CAAd,EACH,CAFqB,CAAtB,CAGH,CAdL,mEAgB2B,CACnBF,KAAK,CAACM,YAAN,CAAmBM,OAAnB,CAA2BC,KAA3B,CAAiC,KAAKR,cAAtC,EACAL,KAAK,CAACM,YAAN,CAAmBM,OAAnB,CAA2BC,KAA3B,CAAiC,KAAKH,cAAtC,EACH,CAnBL,uCAyBa,CACL,MACI,qBAAC,QAAD,MACI,oBAAC,KAAD,EAAO,IAAI,CAAE,KAAKT,KAAL,CAAWC,KAAxB,CAA+B,UAAU,CAAE,KAAKC,mBAAhD,EACK,KAAKF,KAAL,CAAWC,KAAX,CAAmB,KAAKD,KAAL,CAAWC,KAAX,CAAiBY,OAApC,CAA8C,IADnD,CADJ,CAII,oBAAC,gBAAD,CAAsB,KAAKC,KAA3B,CAJJ,CADJ,CAQH,CAlCL,mBAAqBnB,SAArB,QAqCH,CAtCD,CAwCA,cAAeE,CAAAA,gBAAf","sourcesContent":["import React, { Fragment, Component } from 'react';\nimport Modal from '../../../components/UI/Modal/Modal';\n\nconst withErrorHandler = (WrappedComponent, axios) => {\n    return class extends Component {\n        state = {\n            error: null\n        };\n\n        componentWilldMount() {\n            this.reqInterceptor = axios.interceptors.response.use(req => {\n                this.setState({error: null});\n                return req;\n            });\n\n            this.resInterceptor = axios.interceptors.response.use(res => res, error => {\n                this.setState({error: error});\n            });\n        }\n\n        componentWillUnmount() {\n            axios.interceptors.request.eject(this.reqInterceptor);\n            axios.interceptors.request.eject(this.resInterceptor);\n        }\n\n        errorConfirmHandler = () => {\n            this.setState({error: null});\n        }\n\n        render() {\n            return (\n                <Fragment>\n                    <Modal show={this.state.error} modalClose={this.errorConfirmHandler}>\n                        {this.state.error ? this.state.error.message : null}\n                    </Modal>\n                    <WrappedComponent {...this.props} />\n                </Fragment>\n            );\n        }\n    }\n    \n};\n\nexport default withErrorHandler;"]},"metadata":{},"sourceType":"module"}