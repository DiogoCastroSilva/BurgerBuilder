{"ast":null,"code":"import _objectSpread from\"/Users/diogosilva/Desktop/the-burguer-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/diogosilva/Desktop/the-burguer-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/diogosilva/Desktop/the-burguer-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/diogosilva/Desktop/the-burguer-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/diogosilva/Desktop/the-burguer-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/diogosilva/Desktop/the-burguer-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,Fragment}from'react';import{connect}from'react-redux';import Burger from'../../components/Burger/Burger';import BuildControls from'../../components/Burger/BuildControls/BuildControls';import Modal from'../../components/UI/Modal/Modal';import OrderSummary from'../../components/Burger/OrderSummary/OrderSummary';import Spinner from'../../components/UI/Spinner/Spinner';import withErrorHandler from'../hoc/withErrorHandler/withErrorHandler';import axios from'../../axios-orders';import{addIngredient,removeIngredient,getIngredients as _getIngredients,purchaseInit}from'../../store/actions/index';import{setRedirectPath}from'../../store/actions/auth';export var BurgerBuilder=/*#__PURE__*/function(_Component){_inherits(BurgerBuilder,_Component);function BurgerBuilder(){var _getPrototypeOf2;var _this;_classCallCheck(this,BurgerBuilder);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BurgerBuilder)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={pusrchasing:false};_this.updatePurchaseState=function(ingredients){var sum=Object.keys(ingredients).map(function(key){return ingredients[key];}).reduce(function(sum,el){return sum+el;},0);return sum>0;};_this.purchaseHandler=function(){if(_this.props.isAuth){_this.setState({pusrchasing:true});}else{_this.props.onSetRedirectPath('/checkout');_this.props.history.push('/auth');}};_this.purchaseCancelHandler=function(){_this.setState({pusrchasing:false});};_this.purchaseContinueHandler=function(){_this.props.onInitPurchase();_this.props.history.push('/checkout');};return _this;}_createClass(BurgerBuilder,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.getIngredients();}},{key:\"render\",value:function render(){var disableInfo=_objectSpread({},this.props.ingredients);for(var key in disableInfo){disableInfo[key]=disableInfo[key]<=0;}var orderSummary=this.props.ingredients?React.createElement(OrderSummary,{ingredients:this.props.ingredients,purchaseCancel:this.purchaseCancelHandler,purchaseContinue:this.purchaseContinueHandler,price:this.props.totalPrice}):null;var burger=this.props.error?React.createElement(\"p\",null,\"Ingredients can't be loaded!\"):React.createElement(Spinner,null);if(this.props.ingredients){burger=React.createElement(Fragment,null,React.createElement(Burger,{ingredients:this.props.ingredients}),React.createElement(BuildControls,{ingredientAdded:this.props.onIngredientAdded,ingredientRemoved:this.props.onIngredientRemoved,disabled:disableInfo,purchasable:this.updatePurchaseState(this.props.ingredients),price:this.props.totalPrice,ordered:this.purchaseHandler,isAuth:this.props.isAuth}));}return React.createElement(Fragment,null,React.createElement(Modal,{show:this.state.pusrchasing,modalClose:this.purchaseCancelHandler},orderSummary),burger);}}]);return BurgerBuilder;}(Component);var mapStateToProps=function mapStateToProps(state){return{ingredients:state.burgerBuilder.ingredients,totalPrice:state.burgerBuilder.totalPrice,error:state.burgerBuilder.error,isAuth:state.auth.token!==null};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onIngredientAdded:function onIngredientAdded(name){return dispatch(addIngredient(name));},onIngredientRemoved:function onIngredientRemoved(name){return dispatch(removeIngredient(name));},getIngredients:function getIngredients(){return dispatch(_getIngredients());},onInitPurchase:function onInitPurchase(){return dispatch(purchaseInit());},onSetRedirectPath:function onSetRedirectPath(path){return dispatch(setRedirectPath(path));}};};export default connect(mapStateToProps,mapDispatchToProps)(withErrorHandler(BurgerBuilder,axios));","map":{"version":3,"sources":["/Users/diogosilva/Desktop/the-burguer-builder/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","Fragment","connect","Burger","BuildControls","Modal","OrderSummary","Spinner","withErrorHandler","axios","addIngredient","removeIngredient","getIngredients","purchaseInit","setRedirectPath","BurgerBuilder","state","pusrchasing","updatePurchaseState","ingredients","sum","Object","keys","map","key","reduce","el","purchaseHandler","props","isAuth","setState","onSetRedirectPath","history","push","purchaseCancelHandler","purchaseContinueHandler","onInitPurchase","disableInfo","orderSummary","totalPrice","burger","error","onIngredientAdded","onIngredientRemoved","mapStateToProps","burgerBuilder","auth","token","mapDispatchToProps","dispatch","name","path"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\n\nimport Burger from '../../components/Burger/Burger';\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls';\nimport Modal from '../../components/UI/Modal/Modal';\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary';\nimport Spinner from '../../components/UI/Spinner/Spinner';\nimport withErrorHandler from '../hoc/withErrorHandler/withErrorHandler';\nimport axios from '../../axios-orders';\nimport { addIngredient, removeIngredient, getIngredients, purchaseInit } from '../../store/actions/index';\nimport { setRedirectPath } from '../../store/actions/auth';\n\nexport class BurgerBuilder extends Component {\n    state = {\n        pusrchasing: false,\n    };\n\n    componentDidMount() {\n        this.props.getIngredients();\n    }\n\n    updatePurchaseState = (ingredients) => {\n        const sum = Object.keys(ingredients)\n            .map(key => ingredients[key])\n            .reduce((sum, el) => {\n                return sum + el;\n            }, 0);\n        return sum > 0;\n    };\n\n    purchaseHandler = () => {\n        if (this.props.isAuth) {\n            this.setState({pusrchasing: true});\n        } else {\n            this.props.onSetRedirectPath('/checkout');\n            this.props.history.push('/auth');\n        }\n        \n    };\n\n    purchaseCancelHandler = () => {\n        this.setState({pusrchasing: false});\n    };\n\n    purchaseContinueHandler = () => {\n        this.props.onInitPurchase();\n        this.props.history.push('/checkout');\n    };\n\n    render() {\n        const disableInfo = {\n            ...this.props.ingredients\n        };\n\n        for (let key in disableInfo) {\n            disableInfo[key] = disableInfo[key] <= 0;\n        }\n\n        let orderSummary = this.props.ingredients ?\n                <OrderSummary\n                    ingredients={this.props.ingredients}\n                    purchaseCancel={this.purchaseCancelHandler}\n                    purchaseContinue={this.purchaseContinueHandler}\n                    price={this.props.totalPrice} /> :\n                    null;\n\n        let burger = this.props.error ? <p>Ingredients can't be loaded!</p> : <Spinner />;\n\n        if (this.props.ingredients) {\n            burger = (\n                <Fragment>\n                    <Burger ingredients={this.props.ingredients} />\n                    <BuildControls\n                        ingredientAdded={this.props.onIngredientAdded}\n                        ingredientRemoved={this.props.onIngredientRemoved}\n                        disabled={disableInfo}\n                        purchasable={this.updatePurchaseState(this.props.ingredients)}\n                        price={this.props.totalPrice}\n                        ordered={this.purchaseHandler}\n                        isAuth={this.props.isAuth} />\n                </Fragment>\n            );\n        }\n\n        return (\n            <Fragment>\n                <Modal show={this.state.pusrchasing} modalClose={this.purchaseCancelHandler}>\n                    {orderSummary}\n                </Modal>\n                {burger}\n            </Fragment>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        ingredients: state.burgerBuilder.ingredients,\n        totalPrice: state.burgerBuilder.totalPrice,\n        error: state.burgerBuilder.error,\n        isAuth: state.auth.token !== null\n    };\n};\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onIngredientAdded: (name) => dispatch(addIngredient(name)),\n        onIngredientRemoved: (name) => dispatch(removeIngredient(name)),\n        getIngredients: () => dispatch(getIngredients()),\n        onInitPurchase: () => dispatch(purchaseInit()),\n        onSetRedirectPath: (path) => dispatch(setRedirectPath(path))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(BurgerBuilder, axios));"]},"metadata":{},"sourceType":"module"}