{"ast":null,"code":"import { put, delay } from 'redux-saga/effects';\nimport { logoutSucceded, logout, authStart, authSuccess, authFailed } from '../actions/index';\nimport aios from 'axios';\nexport function* logoutSaga(action) {\n  yield localStorage.removeItem('token');\n  yield localStorage.removeItem('expirationDate');\n  yield localStorage.removeItem('userID');\n  yield put(logoutSucceded());\n}\nexport function* checkAuthTimeOut(action) {\n  yield delay(action.expirationTime * 1000);\n  yield put(logout());\n}\nexport function* addUserSaga(action) {\n  yield put(authStart());\n  const authData = {\n    email: action.email,\n    password: action.password,\n    returnSecureToken: true\n  };\n  let url = action.isSignup ? 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCXyYykiJQjUafDFB18wiFqDXo21AdZ6L8' : 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCXyYykiJQjUafDFB18wiFqDXo21AdZ6L8';\n  const response = yield axios.post(url, authData);\n  const expirationDate = new Date(new Date().getTime() + response.data.expiresIn * 1000);\n  localStorage.setItem('token', response.data.idToken);\n  localStorage.setItem('expirationDate', expirationDate);\n  localStorage.setItem('userID', response.data.localId);\n  yield put(authSuccess(response.data.idToken, response.data.localId));\n  yield put(checkAuthTimeOut(response.data.expiresIn));\n  yield put(authFailed(e.response.data.error));\n}","map":{"version":3,"sources":["/Users/diogosilva/Desktop/react-complete-guide/the-burguer-builder/src/store/sagas/auth.js"],"names":["put","delay","logoutSucceded","logout","authStart","authSuccess","authFailed","aios","logoutSaga","action","localStorage","removeItem","checkAuthTimeOut","expirationTime","addUserSaga","authData","email","password","returnSecureToken","url","isSignup","response","axios","post","expirationDate","Date","getTime","data","expiresIn","setItem","idToken","localId","e","error"],"mappings":"AAAA,SAASA,GAAT,EAAcC,KAAd,QAA2B,oBAA3B;AACA,SAASC,cAAT,EAAyBC,MAAzB,EAAiCC,SAAjC,EAA4CC,WAA5C,EAAyDC,UAAzD,QAA2E,kBAA3E;AACA,OAAOC,IAAP,MAAiB,OAAjB;AAEA,OAAO,UAAUC,UAAV,CAAqBC,MAArB,EAA6B;AAChC,QAAMC,YAAY,CAACC,UAAb,CAAwB,OAAxB,CAAN;AACA,QAAMD,YAAY,CAACC,UAAb,CAAwB,gBAAxB,CAAN;AACA,QAAMD,YAAY,CAACC,UAAb,CAAwB,QAAxB,CAAN;AACA,QAAMX,GAAG,CAACE,cAAc,EAAf,CAAT;AACH;AAED,OAAO,UAAUU,gBAAV,CAA2BH,MAA3B,EAAmC;AACtC,QAAMR,KAAK,CAACQ,MAAM,CAACI,cAAP,GAAwB,IAAzB,CAAX;AACA,QAAMb,GAAG,CAACG,MAAM,EAAP,CAAT;AACH;AAED,OAAO,UAAUW,WAAV,CAAsBL,MAAtB,EAA8B;AACjC,QAAMT,GAAG,CAACI,SAAS,EAAV,CAAT;AACA,QAAMW,QAAQ,GAAG;AACbC,IAAAA,KAAK,EAAEP,MAAM,CAACO,KADD;AAEbC,IAAAA,QAAQ,EAAER,MAAM,CAACQ,QAFJ;AAGbC,IAAAA,iBAAiB,EAAE;AAHN,GAAjB;AAMA,MAAIC,GAAG,GAAGV,MAAM,CAACW,QAAP,GACN,mHADM,GAEN,uGAFJ;AAIA,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACC,IAAN,CAAWJ,GAAX,EAAgBJ,QAAhB,CAAvB;AAEA,QAAMS,cAAc,GAAG,IAAIC,IAAJ,CAAS,IAAIA,IAAJ,GAAWC,OAAX,KAAuBL,QAAQ,CAACM,IAAT,CAAcC,SAAd,GAA0B,IAA1D,CAAvB;AACAlB,EAAAA,YAAY,CAACmB,OAAb,CAAqB,OAArB,EAA8BR,QAAQ,CAACM,IAAT,CAAcG,OAA5C;AACApB,EAAAA,YAAY,CAACmB,OAAb,CAAqB,gBAArB,EAAuCL,cAAvC;AACAd,EAAAA,YAAY,CAACmB,OAAb,CAAqB,QAArB,EAA+BR,QAAQ,CAACM,IAAT,CAAcI,OAA7C;AAEA,QAAM/B,GAAG,CAACK,WAAW,CAACgB,QAAQ,CAACM,IAAT,CAAcG,OAAf,EAAwBT,QAAQ,CAACM,IAAT,CAAcI,OAAtC,CAAZ,CAAT;AACA,QAAM/B,GAAG,CAACY,gBAAgB,CAACS,QAAQ,CAACM,IAAT,CAAcC,SAAf,CAAjB,CAAT;AAEA,QAAM5B,GAAG,CAACM,UAAU,CAAC0B,CAAC,CAACX,QAAF,CAAWM,IAAX,CAAgBM,KAAjB,CAAX,CAAT;AACH","sourcesContent":["import { put, delay } from 'redux-saga/effects';\nimport { logoutSucceded, logout, authStart, authSuccess, authFailed } from '../actions/index';\nimport aios from 'axios';\n\nexport function* logoutSaga(action) {\n    yield localStorage.removeItem('token');\n    yield localStorage.removeItem('expirationDate');\n    yield localStorage.removeItem('userID');\n    yield put(logoutSucceded());\n}\n\nexport function* checkAuthTimeOut(action) {\n    yield delay(action.expirationTime * 1000);\n    yield put(logout());\n}\n\nexport function* addUserSaga(action) {\n    yield put(authStart());\n    const authData = {\n        email: action.email,\n        password: action.password,\n        returnSecureToken: true\n    };\n\n    let url = action.isSignup ?\n        'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCXyYykiJQjUafDFB18wiFqDXo21AdZ6L8' :\n        'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCXyYykiJQjUafDFB18wiFqDXo21AdZ6L8';\n\n    const response = yield axios.post(url, authData);\n    \n    const expirationDate = new Date(new Date().getTime() + response.data.expiresIn * 1000);\n    localStorage.setItem('token', response.data.idToken);\n    localStorage.setItem('expirationDate', expirationDate);\n    localStorage.setItem('userID', response.data.localId);\n\n    yield put(authSuccess(response.data.idToken, response.data.localId));\n    yield put(checkAuthTimeOut(response.data.expiresIn));\n\n    yield put(authFailed(e.response.data.error));\n}"]},"metadata":{},"sourceType":"module"}